{"ast":null,"code":"import _classCallCheck from \"/Users/keno/Projects/mario/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/keno/Projects/mario/node_modules/@babel/runtime/helpers/esm/createClass\";\n\nvar Game =\n/*#__PURE__*/\nfunction () {\n  function Game(width, height, context) {\n    _classCallCheck(this, Game);\n\n    this.width = width;\n    this.height = height;\n    this.context = context;\n    context.fillStyle = \"blue\";\n    context.fillRect(0, 0, width, height);\n  }\n\n  _createClass(Game, [{\n    key: \"setResources\",\n    value: function setResources(resources) {\n      this.resources = resources;\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      // make sure resources are loaded\n      var loadImg = function loadImg() {\n        for (var _len = arguments.length, paths = new Array(_len), _key = 0; _key < _len; _key++) {\n          paths[_key] = arguments[_key];\n        }\n\n        return Promise.all(paths.map(checkImage));\n      };\n\n      loadImg(this.resources.map(function (img) {\n        return img.src;\n      }));\n    }\n  }, {\n    key: \"checkImage\",\n    value: function checkImage(path) {\n      return new Promise(function (resolve) {\n        var img = new Image();\n\n        img.onload = function () {\n          return resolve({\n            path: path,\n            status: 'ok'\n          });\n        };\n\n        img.onerror = function () {\n          return resolve({\n            path: path,\n            status: 'error'\n          });\n        };\n\n        img.src = path;\n      });\n    }\n  }]);\n\n  return Game;\n}();\n\nexport default Game;","map":{"version":3,"sources":["/Users/keno/Projects/mario/src/Game.js"],"names":["Game","width","height","context","fillStyle","fillRect","resources","loadImg","paths","Promise","all","map","checkImage","img","src","path","resolve","Image","onload","status","onerror"],"mappings":";;;IAAMA,I;;;AAEJ,gBAAYC,KAAZ,EAAmBC,MAAnB,EAA2BC,OAA3B,EAAoC;AAAA;;AAClC,SAAKF,KAAL,GAAaA,KAAb;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAKC,OAAL,GAAeA,OAAf;AAEAA,IAAAA,OAAO,CAACC,SAAR,GAAoB,MAApB;AACAD,IAAAA,OAAO,CAACE,QAAR,CAAiB,CAAjB,EAAoB,CAApB,EAAuBJ,KAAvB,EAA8BC,MAA9B;AACD;;;;iCAEYI,S,EAAW;AACtB,WAAKA,SAAL,GAAiBA,SAAjB;AACD;;;2BAEM;AACL;AACA,UAAMC,OAAO,GAAG,SAAVA,OAAU;AAAA,0CAAIC,KAAJ;AAAIA,UAAAA,KAAJ;AAAA;;AAAA,eAAcC,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACG,GAAN,CAAUC,UAAV,CAAZ,CAAd;AAAA,OAAhB;;AACAL,MAAAA,OAAO,CAAC,KAAKD,SAAL,CAAeK,GAAf,CAAmB,UAAAE,GAAG;AAAA,eAAIA,GAAG,CAACC,GAAR;AAAA,OAAtB,CAAD,CAAP;AACD;;;+BAGUC,I,EAAM;AACf,aAAO,IAAIN,OAAJ,CAAY,UAAAO,OAAO,EAAI;AAC1B,YAAMH,GAAG,GAAG,IAAII,KAAJ,EAAZ;;AACAJ,QAAAA,GAAG,CAACK,MAAJ,GAAa;AAAA,iBAAMF,OAAO,CAAC;AAACD,YAAAA,IAAI,EAAJA,IAAD;AAAOI,YAAAA,MAAM,EAAE;AAAf,WAAD,CAAb;AAAA,SAAb;;AACAN,QAAAA,GAAG,CAACO,OAAJ,GAAc;AAAA,iBAAMJ,OAAO,CAAC;AAACD,YAAAA,IAAI,EAAJA,IAAD;AAAOI,YAAAA,MAAM,EAAE;AAAf,WAAD,CAAb;AAAA,SAAd;;AAEAN,QAAAA,GAAG,CAACC,GAAJ,GAAUC,IAAV;AACH,OANM,CAAP;AAOD;;;;;;AAIH,eAAef,IAAf","sourcesContent":["class Game {\n\n  constructor(width, height, context) {\n    this.width = width;\n    this.height = height;\n    this.context = context;\n\n    context.fillStyle = \"blue\";\n    context.fillRect(0, 0, width, height);\n  }\n\n  setResources(resources) {\n    this.resources = resources;\n  }\n\n  init() {\n    // make sure resources are loaded\n    const loadImg = (...paths) => Promise.all(paths.map(checkImage));\n    loadImg(this.resources.map(img => img.src))\n  }\n\n\n  checkImage(path) {\n    return new Promise(resolve => {\n        const img = new Image();\n        img.onload = () => resolve({path, status: 'ok'});\n        img.onerror = () => resolve({path, status: 'error'});\n\n        img.src = path;\n    });\n  }\n\n}\n\nexport default Game;\n"]},"metadata":{},"sourceType":"module"}