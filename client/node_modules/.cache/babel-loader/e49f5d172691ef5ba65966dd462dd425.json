{"ast":null,"code":"import _classCallCheck from \"/Users/keno/Projects/mario/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/keno/Projects/mario/client/node_modules/@babel/runtime/helpers/esm/createClass\";\n\nvar Connection =\n/*#__PURE__*/\nfunction () {\n  function Connection() {\n    _classCallCheck(this, Connection);\n\n    this.subscribers = {};\n  }\n\n  _createClass(Connection, [{\n    key: \"connect\",\n    value: function connect(playerName) {\n      var _this = this;\n\n      this.ws = new WebSocket(\"ws://localhost:8080/?player=\".concat(playerName));\n\n      this.ws.onopen = function (event) {// handle event\n      };\n\n      this.ws.onmessage = function (event) {\n        var data = JSON.parse(event.data);\n        console.log(data);\n\n        _this.subscribers[data.type].forEach(function (callback) {\n          return callback(data);\n        });\n      };\n    }\n  }, {\n    key: \"subscribe\",\n    value: function subscribe(type, callback) {\n      return this.subscribers[type].push(callback) - 1;\n    }\n  }, {\n    key: \"send\",\n    value: function send(message) {\n      this.ws.send(message);\n    }\n  }]);\n\n  return Connection;\n}();\n\nexport default Connection;","map":{"version":3,"sources":["/Users/keno/Projects/mario/client/src/Connection.js"],"names":["Connection","subscribers","playerName","ws","WebSocket","onopen","event","onmessage","data","JSON","parse","console","log","type","forEach","callback","push","message","send"],"mappings":";;;IAEMA,U;;;AACJ,wBAAc;AAAA;;AACZ,SAAKC,WAAL,GAAmB,EAAnB;AACD;;;;4BAEOC,U,EAAY;AAAA;;AAClB,WAAKC,EAAL,GAAU,IAAIC,SAAJ,uCAA6CF,UAA7C,EAAV;;AAEA,WAAKC,EAAL,CAAQE,MAAR,GAAiB,UAACC,KAAD,EAAW,CACzB;AACF,OAFD;;AAIA,WAAKH,EAAL,CAAQI,SAAR,GAAoB,UAACD,KAAD,EAAW;AAC7B,YAAME,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWJ,KAAK,CAACE,IAAjB,CAAb;AACAG,QAAAA,OAAO,CAACC,GAAR,CAAYJ,IAAZ;;AACA,QAAA,KAAI,CAACP,WAAL,CAAiBO,IAAI,CAACK,IAAtB,EAA4BC,OAA5B,CAAoC,UAAAC,QAAQ;AAAA,iBAAIA,QAAQ,CAACP,IAAD,CAAZ;AAAA,SAA5C;AACD,OAJD;AAKD;;;8BAESK,I,EAAME,Q,EAAU;AACxB,aAAO,KAAKd,WAAL,CAAiBY,IAAjB,EAAuBG,IAAvB,CAA4BD,QAA5B,IAAwC,CAA/C;AACD;;;yBAEIE,O,EAAS;AACZ,WAAKd,EAAL,CAAQe,IAAR,CAAaD,OAAb;AACD;;;;;;AAGH,eAAejB,UAAf","sourcesContent":["\n\nclass Connection {\n  constructor() {\n    this.subscribers = {}\n  }\n\n  connect(playerName) {\n    this.ws = new WebSocket(`ws://localhost:8080/?player=${playerName}`);\n\n    this.ws.onopen = (event) => {\n       // handle event\n    }\n\n    this.ws.onmessage = (event) => {\n      const data = JSON.parse(event.data)\n      console.log(data)\n      this.subscribers[data.type].forEach(callback => callback(data))\n    }\n  }\n\n  subscribe(type, callback) {\n    return this.subscribers[type].push(callback) - 1\n  }\n\n  send(message) {\n    this.ws.send(message)\n  }\n}\n\nexport default Connection\n"]},"metadata":{},"sourceType":"module"}