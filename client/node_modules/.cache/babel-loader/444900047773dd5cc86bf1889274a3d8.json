{"ast":null,"code":"import _classCallCheck from \"/Users/keno/Projects/mario/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/keno/Projects/mario/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport Player from './Player';\n\nvar Game =\n/*#__PURE__*/\nfunction () {\n  function Game(width, height, context) {\n    _classCallCheck(this, Game);\n\n    this.width = width;\n    this.height = height;\n    this.context = context;\n    context.fillStyle = \"#5D94FB\";\n    context.fillRect(0, 0, width, height);\n  }\n\n  _createClass(Game, [{\n    key: \"setResources\",\n    value: function setResources(resources) {\n      this.resources = resources;\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      var _this = this;\n\n      // make sure resources are loaded\n      Promise.all(Object.values(this.resources).map(function (img) {\n        return _this.checkImage(img.src);\n      })).then(function () {\n        return _this.start();\n      });\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      this.player = new Player(this.context, this.resources.mario);\n      this.gameLoop();\n    } // main game loop -------------------------\n\n  }, {\n    key: \"gameLoop\",\n    value: function gameLoop() {\n      window.requestAnimationFrame(this.gameLoop);\n      context.clearRect(0, 0, this.width, this.height);\n      this.player.update();\n      this.player.draw();\n    } // UTILS ----------------------------------\n\n  }, {\n    key: \"checkImage\",\n    value: function checkImage(path) {\n      return new Promise(function (resolve) {\n        var img = new Image();\n\n        img.onload = function () {\n          return resolve({\n            path: path,\n            status: 'ok'\n          });\n        };\n\n        img.onerror = function () {\n          return resolve({\n            path: path,\n            status: 'error'\n          });\n        };\n\n        img.src = path;\n      });\n    }\n  }]);\n\n  return Game;\n}();\n\nexport default Game;","map":{"version":3,"sources":["/Users/keno/Projects/mario/src/Game.js"],"names":["Player","Game","width","height","context","fillStyle","fillRect","resources","Promise","all","Object","values","map","img","checkImage","src","then","start","player","mario","gameLoop","window","requestAnimationFrame","clearRect","update","draw","path","resolve","Image","onload","status","onerror"],"mappings":";;AAAA,OAAOA,MAAP,MAAmB,UAAnB;;IAGMC,I;;;AAEJ,gBAAYC,KAAZ,EAAmBC,MAAnB,EAA2BC,OAA3B,EAAoC;AAAA;;AAClC,SAAKF,KAAL,GAAaA,KAAb;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAKC,OAAL,GAAeA,OAAf;AAEAA,IAAAA,OAAO,CAACC,SAAR,GAAoB,SAApB;AACAD,IAAAA,OAAO,CAACE,QAAR,CAAiB,CAAjB,EAAoB,CAApB,EAAuBJ,KAAvB,EAA8BC,MAA9B;AACD;;;;iCAEYI,S,EAAW;AACtB,WAAKA,SAAL,GAAiBA,SAAjB;AACD;;;2BAEM;AAAA;;AACL;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYC,MAAM,CAACC,MAAP,CAAc,KAAKJ,SAAnB,EAA8BK,GAA9B,CAAkC,UAAAC,GAAG;AAAA,eAAI,KAAI,CAACC,UAAL,CAAgBD,GAAG,CAACE,GAApB,CAAJ;AAAA,OAArC,CAAZ,EACeC,IADf,CACoB;AAAA,eAAM,KAAI,CAACC,KAAL,EAAN;AAAA,OADpB;AAED;;;4BAEO;AACN,WAAKC,MAAL,GAAc,IAAIlB,MAAJ,CAAW,KAAKI,OAAhB,EAAyB,KAAKG,SAAL,CAAeY,KAAxC,CAAd;AAEA,WAAKC,QAAL;AACD,K,CAED;;;;+BACY;AAEVC,MAAAA,MAAM,CAACC,qBAAP,CAA6B,KAAKF,QAAlC;AAEAhB,MAAAA,OAAO,CAACmB,SAAR,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,KAAKrB,KAA7B,EAAoC,KAAKC,MAAzC;AACA,WAAKe,MAAL,CAAYM,MAAZ;AACA,WAAKN,MAAL,CAAYO,IAAZ;AACD,K,CAED;;;;+BACWC,I,EAAM;AACf,aAAO,IAAIlB,OAAJ,CAAY,UAAAmB,OAAO,EAAI;AAC1B,YAAMd,GAAG,GAAG,IAAIe,KAAJ,EAAZ;;AACAf,QAAAA,GAAG,CAACgB,MAAJ,GAAa;AAAA,iBAAMF,OAAO,CAAC;AAACD,YAAAA,IAAI,EAAJA,IAAD;AAAOI,YAAAA,MAAM,EAAE;AAAf,WAAD,CAAb;AAAA,SAAb;;AACAjB,QAAAA,GAAG,CAACkB,OAAJ,GAAc;AAAA,iBAAMJ,OAAO,CAAC;AAACD,YAAAA,IAAI,EAAJA,IAAD;AAAOI,YAAAA,MAAM,EAAE;AAAf,WAAD,CAAb;AAAA,SAAd;;AAEAjB,QAAAA,GAAG,CAACE,GAAJ,GAAUW,IAAV;AACH,OANM,CAAP;AAOD;;;;;;AAIH,eAAezB,IAAf","sourcesContent":["import Player from './Player';\n\n\nclass Game {\n\n  constructor(width, height, context) {\n    this.width = width;\n    this.height = height;\n    this.context = context;\n\n    context.fillStyle = \"#5D94FB\";\n    context.fillRect(0, 0, width, height);\n  }\n\n  setResources(resources) {\n    this.resources = resources;\n  }\n\n  init() {\n    // make sure resources are loaded\n    Promise.all(Object.values(this.resources).map(img => this.checkImage(img.src)))\n                  .then(() => this.start());\n  }\n\n  start() {\n    this.player = new Player(this.context, this.resources.mario);\n\n    this.gameLoop();\n  }\n\n  // main game loop -------------------------\n  gameLoop () {\n\n    window.requestAnimationFrame(this.gameLoop);\n\n    context.clearRect(0, 0, this.width, this.height)\n    this.player.update();\n    this.player.draw();\n  }\n\n  // UTILS ----------------------------------\n  checkImage(path) {\n    return new Promise(resolve => {\n        const img = new Image();\n        img.onload = () => resolve({path, status: 'ok'});\n        img.onerror = () => resolve({path, status: 'error'});\n\n        img.src = path;\n    });\n  }\n\n}\n\nexport default Game;\n"]},"metadata":{},"sourceType":"module"}